{"version":3,"file":"commonHelpers.js","sources":["../src/imageAPI.js","../src/index.js"],"sourcesContent":["import axios from 'axios';\n\nexport class ImageAPI {\n  static BASE_URL = 'https://pixabay.com';\n  static END_POINT = '/api/';\n\n  constructor() {\n    this.query = 'Default';\n    this.page = 1;\n    this.pageSize = 40;\n    this.totalResults = 0;\n  }\n\n  fetchImages() {\n    const url = ImageAPI.BASE_URL + ImageAPI.END_POINT;\n    const params = {\n      key: '42078504-06c0bc861c70afe486d8727f6',\n      q: this.query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      page: this.page,\n      per_page: this.pageSize,\n    };\n\n    return axios.get(url, { params }).then(response => response.data);\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { ImageAPI } from './imageAPI';\nconst imageAPI = new ImageAPI();\n\nconst gallery = document.querySelector('.gallery');\nconst form = document.querySelector('.form');\nconst loader = document.querySelector('.loader');\nconst loadBtn = document.querySelector('.load');\n\nform.addEventListener('submit', onFormSubmit);\nloadBtn.addEventListener('click', onLoadBtnClick);\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n  loader.classList.remove('is-hidden');\n  const word = e.target.elements.imageDesc.value;\n  imageAPI.query = word;\n  imageAPI.page = 1;\n\n  const result = await imageAPI.fetchImages();\n  if (result.totalHits === 0) {\n    iziToast.error({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!!',\n    });\n    return;\n  }\n  const markup = imagesTemplate(result.hits);\n  gallery.innerHTML = markup;\n\n  modalWindow.refresh();\n\n  loadBtn.classList.add('is-hidden');\n  imageAPI.totalResults = result.totalHits;\n\n  changeBtnStatus();\n  e.target.reset();\n  loader.classList.add('is-hidden');\n}\n\nasync function onLoadBtnClick() {\n  loader.classList.remove('is-hidden');\n  imageAPI.page += 1;\n  const result = await imageAPI.fetchImages();\n  const markup = imagesTemplate(result.hits);\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  window.scrollBy({\n    top: 500,\n    behavior: 'smooth',\n  });\n  const elem = document.querySelector('.gallery-item');\n  const rect = elem.getBoundingClientRect();\n  rect.height = rect.height * 2;\n\n  modalWindow.refresh();\n\n  changeBtnStatus();\n  loader.classList.add('is-hidden');\n}\n\nfunction changeBtnStatus() {\n  const maxPage = Math.ceil(imageAPI.totalResults / imageAPI.pageSize);\n  if (imageAPI.page >= maxPage) {\n    loadBtn.classList.add('is-hidden');\n\n    iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  } else {\n    loadBtn.classList.remove('is-hidden');\n  }\n}\n\nfunction imgTemplate({\n  largeImageURL,\n  webformatURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `<li class=\"gallery-item\">\n      <a href='${largeImageURL}' class=\"galery-link\">\n  <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n\n  <div class = info-container>\n\n    <div class=\"info-item\">\n      <span class=\"info-name\">Likes</span>\n      <span class =\"info-value\">${likes}</span>\n    </div>\n\n    <div class=\"info-item\">\n      <span class=\"info-name\">Views</span>\n      <span class =\"info-value\">${views}</span>\n    </div>\n\n    <div class=\"info-item\">\n      <span class=\"info-name\">Comments</span>\n      <span class =\"info-value\">${comments}</span>\n    </div>\n\n    <div class=\"info-item\">\n      <span class=\"info-name\">Downloads</span>\n      <span class =\"info-value\">${downloads}</span>\n    </div>\n    </div>\n\n  </a>\n</li>\n`;\n}\n\nfunction imagesTemplate(images) {\n  return images.map(imgTemplate).join('');\n}\n\nconst modalWindow = new SimpleLightbox('.gallery a', {\n  captionDelay: '250',\n});\n"],"names":["_ImageAPI","url","params","axios","response","__publicField","ImageAPI","imageAPI","gallery","form","loader","loadBtn","onFormSubmit","onLoadBtnClick","e","word","result","iziToast","markup","imagesTemplate","modalWindow","changeBtnStatus","rect","maxPage","imgTemplate","largeImageURL","webformatURL","tags","likes","views","comments","downloads","images","SimpleLightbox"],"mappings":"46BAEO,MAAMA,EAAN,MAAMA,CAAS,CAIpB,aAAc,CACZ,KAAK,MAAQ,UACb,KAAK,KAAO,EACZ,KAAK,SAAW,GAChB,KAAK,aAAe,CACrB,CAED,aAAc,CACZ,MAAMC,EAAMD,EAAS,SAAWA,EAAS,UACnCE,EAAS,CACb,IAAK,qCACL,EAAG,KAAK,MACR,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAM,KAAK,KACX,SAAU,KAAK,QACrB,EAEI,OAAOC,EAAM,IAAIF,EAAK,CAAE,OAAAC,CAAM,CAAE,EAAE,KAAKE,GAAYA,EAAS,IAAI,CACjE,CACH,EAxBEC,EADWL,EACJ,WAAW,uBAClBK,EAFWL,EAEJ,YAAY,SAFd,IAAMM,EAANN,ECIP,MAAMO,EAAW,IAAID,EAEfE,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,OAAO,EAE9CF,EAAK,iBAAiB,SAAUG,CAAY,EAC5CD,EAAQ,iBAAiB,QAASE,CAAc,EAEhD,eAAeD,EAAaE,EAAG,CAC7BA,EAAE,eAAc,EAChBJ,EAAO,UAAU,OAAO,WAAW,EACnC,MAAMK,EAAOD,EAAE,OAAO,SAAS,UAAU,MACzCP,EAAS,MAAQQ,EACjBR,EAAS,KAAO,EAEhB,MAAMS,EAAS,MAAMT,EAAS,cAC9B,GAAIS,EAAO,YAAc,EAAG,CAC1BC,EAAS,MAAM,CACb,QACE,2EACR,CAAK,EACD,MACD,CACD,MAAMC,EAASC,EAAeH,EAAO,IAAI,EACzCR,EAAQ,UAAYU,EAEpBE,EAAY,QAAO,EAEnBT,EAAQ,UAAU,IAAI,WAAW,EACjCJ,EAAS,aAAeS,EAAO,UAE/BK,IACAP,EAAE,OAAO,QACTJ,EAAO,UAAU,IAAI,WAAW,CAClC,CAEA,eAAeG,GAAiB,CAC9BH,EAAO,UAAU,OAAO,WAAW,EACnCH,EAAS,MAAQ,EACjB,MAAMS,EAAS,MAAMT,EAAS,cACxBW,EAASC,EAAeH,EAAO,IAAI,EACzCR,EAAQ,mBAAmB,YAAaU,CAAM,EAE9C,OAAO,SAAS,CACd,IAAK,IACL,SAAU,QACd,CAAG,EAED,MAAMI,EADO,SAAS,cAAc,eAAe,EACjC,wBAClBA,EAAK,OAASA,EAAK,OAAS,EAE5BF,EAAY,QAAO,EAEnBC,IACAX,EAAO,UAAU,IAAI,WAAW,CAClC,CAEA,SAASW,GAAkB,CACzB,MAAME,EAAU,KAAK,KAAKhB,EAAS,aAAeA,EAAS,QAAQ,EAC/DA,EAAS,MAAQgB,GACnBZ,EAAQ,UAAU,IAAI,WAAW,EAEjCM,EAAS,KAAK,CACZ,QAAS,4DACf,CAAK,GAEDN,EAAQ,UAAU,OAAO,WAAW,CAExC,CAEA,SAASa,EAAY,CACnB,cAAAC,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACF,EAAG,CACD,MAAO;AAAA,iBACQN,CAAa;AAAA,oCACMC,CAAY,UAAUC,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAM5BC,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA,kCAKLC,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA,kCAKLC,CAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,kCAKRC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAO3C,CAEA,SAASZ,EAAea,EAAQ,CAC9B,OAAOA,EAAO,IAAIR,CAAW,EAAE,KAAK,EAAE,CACxC,CAEA,MAAMJ,EAAc,IAAIa,EAAe,aAAc,CACnD,aAAc,KAChB,CAAC"}